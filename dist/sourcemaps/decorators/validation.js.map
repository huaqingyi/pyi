{"version":3,"sources":["decorators/validation.ts"],"names":[],"mappings":";;AAAA,kCAAkC;AAElC,qDAA0E;AAC1E,2CAAsD;AAEtD,SAAgB,UAAU,CAAC,MAAW;IAClC,4BAA4B;IAC5B,iEAAiE;IACjE,IAAI;IACJ,OAAO,MAAM,CAAC;AAClB,CAAC;AALD,gCAKC;AAOD,MAAsB,aAA0B,SAAQ,cAAO;IAGpD,MAAM,CAAC,KAAK;QACf,OAAO,aAAa,CAAC;IACzB,CAAC;IAEM,KAAK,CAAC,QAAQ;QACjB,OAAO,MAAM,0BAAQ,CAAC,IAAI,CAAC,CAAC;IAChC,CAAC;IAEM,MAAM,CAAC,MAAyB;QACnC,OAAO,wBAAY,CAAC;YAGT,KAAK,CAAC,MAAM;gBACf,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;gBAClB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;gBAC9C,MAAM,IAAI,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;YAC5C,CAAC;SACJ,CAAC,CAAC;IACP,CAAC;CACJ;AAtBD,sCAsBC","file":"../../decorators/validation.js","sourcesContent":["import { PYICore } from '../core';\nimport { isFunction } from 'lodash';\nimport { validate, validateSync, ValidationError } from 'class-validator';\nimport { PYIExecption, PYIThrows } from './execption';\n\nexport function Validation(target: any) {\n    // const { _root } = target;\n    // if (_root && isFunction(_root) && _root() === PYIValidation) {\n    // }\n    return target;\n}\n\nexport interface PYIValidationImpl {\n    validate: () => any;\n    throws: (errors: ValidationError[]) => any;\n}\n\nexport abstract class PYIValidation<Props = {}> extends PYICore implements PYIValidationImpl {\n    public static swaggerDocument: any;\n    \n    public static _root() {\n        return PYIValidation;\n    }\n\n    public async validate() {\n        return await validate(this);\n    }\n\n    public throws(errors: ValidationError[]) {\n        return PYIExecption(class implements PYIThrows {\n            public errno!: number;\n            public errmsg!: string;\n            public async throws() {\n                this.errno = 1007;\n                this.errmsg = JSON.stringify(errors, null, 4);\n                throw new Error(JSON.stringify(errors));\n            }\n        });\n    }\n}\n"]}