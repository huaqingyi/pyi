{"version":3,"sources":["decorators/configuration.ts"],"names":[],"mappings":";;;AAEA,kCAAkC;AAClC,mCAAoC;AAEpC;;GAEG;AACH,MAAa,gBAA8B,SAAQ,cAAO;IAC/C,MAAM,CAAC,KAAK;QACf,OAAO,gBAAgB,CAAC;IAC5B,CAAC;IAIM,KAAK;QACR,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,MAAM;QACT,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAdD,4CAcC;AAED,MAAa,mBAAiC,SAAQ,cAAO;IAQzD,YAAY,KAAa;QACrB,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IAC1B,CAAC;IAVM,MAAM,CAAC,KAAK;QACf,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAUM,KAAK;QACR,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,MAAM;QACT,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AApBD,kDAoBC;AAkBD,SAAgB,aAAa,CAAC,KAAU;IACpC,MAAM,IAAI,GAAG,KAAK,IAAI,KAAK,CAAC,KAAK,IAAI,mBAAU,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,KAAK,CAAC,KAAK,EAAE,CAAC;IAC9E,QAAQ,IAAI,EAAE;QACV,KAAK,gBAAgB;YAAE;gBACnB,OAAO,KAAK,CAAC;aAChB;YAAA,CAAC;QACF,KAAK,mBAAmB;YAAE;gBACtB,OAAO,KAAK,CAAC;aAChB;YAAA,CAAC;QACF,OAAO,CAAC,CAAC,OAAO,CAAC,MAAsC,EAAE,EAAE;YACvD,OAAO,MAAM,CAAC;QAClB,CAAC,CAAC;KACL;AACL,CAAC;AAbD,sCAaC","file":"../../decorators/configuration.js","sourcesContent":["import { PYIController } from './controller';\nimport { PYICoreClass } from './../core/pyi';\nimport { PYICore } from '../core';\nimport { isFunction } from 'lodash';\n\n/**\n * Component base\n */\nexport class PYIConfiguration<Props = any> extends PYICore {\n    public static _base() {\n        return PYIConfiguration;\n    }\n\n    public props!: Props;\n\n    public input() {\n        return this;\n    }\n\n    public output() {\n        return this;\n    }\n}\n\nexport class PYIAppConfiguration<Props = any> extends PYICore {\n    public static _base() {\n        return PYIAppConfiguration;\n    }\n\n    public props!: Props;\n    public controllers: Array<PYICoreClass<PYIController>>;\n\n    constructor(props?: Props) {\n        super();\n        this.controllers = [];\n    }\n\n    public input() {\n        return this;\n    }\n\n    public output() {\n        return this;\n    }\n}\n\n/**\n * 普通配置\n * @param target PYIConfiguration 类\n */\nexport function Configuration<V extends PYICoreClass<PYIConfiguration<any>>>(target: V): V;\nexport function Configuration<Props = any>(\n    config: Props\n): <V extends PYICoreClass<PYIConfiguration<Props>>>(target: V) => V;\n/**\n * 系统配置\n * @param target PYIAppConfiguration\n */\nexport function Configuration<V extends PYICoreClass<PYIAppConfiguration<any>>>(target: V): V;\nexport function Configuration<Props = any>(\n    config: Props\n): <V extends PYICoreClass<PYIAppConfiguration<Props>>>(target: V) => V;\nexport function Configuration(props: any) {\n    const base = props && props._base && isFunction(props._base) && props._base();\n    switch (base) {\n        case PYIConfiguration: {\n            return props;\n        };\n        case PYIAppConfiguration: {\n            return props;\n        };\n        default: return (target: PYICoreClass<PYIConfiguration>) => {\n            return target;\n        };\n    }\n}\n"]}