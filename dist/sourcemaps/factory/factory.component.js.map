{"version":3,"sources":["factory/factory.component.ts"],"names":[],"mappings":";;AAAA,kCAAkC;AAClC,8CAAsE;AACtE,mCAAoC;AAEpC,IAAY,kBAGX;AAHD,WAAY,kBAAkB;IAC1B,iDAA2B,CAAA;IAC3B,6CAAuB,CAAA;AAC3B,CAAC,EAHW,kBAAkB,GAAlB,0BAAkB,KAAlB,0BAAkB,QAG7B;AAED,MAAa,gBAAiB,SAAQ,cAAO;IAQzC,YACW,GAAW,EACX,SAAc,EACd,IAAwB,EACxB,KAAW;QAElB,KAAK,EAAE,CAAC;QALD,QAAG,GAAH,GAAG,CAAQ;QACX,cAAS,GAAT,SAAS,CAAK;QACd,SAAI,GAAJ,IAAI,CAAoB;QACxB,UAAK,GAAL,KAAK,CAAM;IAGtB,CAAC;IAbM,MAAM,CAAC,KAAK;QACf,OAAO,gBAAgB,CAAC;IAC5B,CAAC;IAaM,KAAK,CAAC,MAAM,CAAC,MAAW;QAC3B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACzB,CAAC;IAEM,KAAK;QACR,OAAO,gBAAgB,CAAC;IAC5B,CAAC;IAEM,KAAK,CAAC,OAAO;QAChB,IAAI,QAAa,CAAC;QAClB,IACI,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,mBAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,KAAK,6BAAgB,CAAC;YACzG,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,mBAAU,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,KAAK,gCAAmB,CAAC,EAC9G;YACE,QAAQ,IAAI,CAAC,IAAI,EAAE;gBACf,KAAK,kBAAkB,CAAC,SAAS;oBAC7B,QAAQ,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACxD,MAAM;gBACV,KAAK,kBAAkB,CAAC,WAAW;oBAC/B,QAAQ,GAAG,MAAM,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBACxD,MAAM;aACb;YACD,QAAQ,GAAG,MAAM,QAAQ,CAAC,WAAW,EAAE,CAAC;SAC3C;aAAM;YACH,QAAQ,IAAI,CAAC,IAAI,EAAE;gBACf,KAAK,kBAAkB,CAAC,SAAS;oBAC7B,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;oBACxC,MAAM;gBACV,KAAK,kBAAkB,CAAC,WAAW;oBAC/B,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;oBACxC,MAAM;aACb;SACJ;QACD,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC;QAC3C,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;CACJ;AArDD,4CAqDC","file":"../../factory/factory.component.js","sourcesContent":["import { PYICore } from '../core';\nimport { PYIConfiguration, PYIAppConfiguration } from '../decorators';\nimport { isFunction } from 'lodash';\n\nexport enum ComponentWiredType {\n    AUTOCONNECT = 'autoconnect',\n    AUTOWIRED = 'autowired'\n}\n\nexport class FactoryComponent extends PYICore {\n\n    public static _base() {\n        return FactoryComponent;\n    }\n\n    public target: any;\n\n    constructor(\n        public key: string,\n        public component: any,\n        public type: ComponentWiredType,\n        public props?: any\n    ) {\n        super();\n    }\n\n    public async _input(target: any) {\n        this.target = target;\n    }\n\n    public _base() {\n        return FactoryComponent;\n    }\n\n    public async _output() {\n        let instance: any;\n        if (\n            (this.component._base && isFunction(this.component._base) && this.component._base() === PYIConfiguration) ||\n            (this.component._base && isFunction(this.component._base) && this.component._base() === PYIAppConfiguration)\n        ) {\n            switch (this.type) {\n                case ComponentWiredType.AUTOWIRED:\n                    instance = await this.component._pyiruntime(this.props);\n                    break;\n                case ComponentWiredType.AUTOCONNECT:\n                    instance = await this.component._pyiconnect(this.props);\n                    break;\n            }\n            instance = await instance._pyiruntime();\n        } else {\n            switch (this.type) {\n                case ComponentWiredType.AUTOWIRED:\n                    instance = this.component._pyiruntime();\n                    break;\n                case ComponentWiredType.AUTOCONNECT:\n                    instance = this.component._pyiconnect();\n                    break;\n            }\n        }\n        this.target.prototype[this.key] = instance;\n        return this.target;\n    }\n}\n"]}